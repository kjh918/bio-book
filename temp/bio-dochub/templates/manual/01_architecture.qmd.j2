# Architecture & I/O

## 1. Repository Structure

### Source Directory (`{{ source_dir }}`)
파이프라인의 핵심 코드 및 스크립트가 위치한 메인 디렉토리입니다.
```text
{{ source_tree }}
```

{% if test_tree %}
### Test Directory (`{{ test_dir }}`)
분석 테스트 환경 및 임시 파일이 위치한 디렉토리입니다.
```text
{{ test_tree }}
```
{% endif %}

## 2. Pipeline Workflow

아래는 파이프라인의 전체 실행 흐름도입니다.

```{mermaid}
#| column: page

%%{init: {"flowchart": {"htmlLabels": true}}}%%
flowchart TD
    %% [1] 스타일: 프로세스는 회색 바탕, 기본 연결선 굵게
    classDef proc fill:#e6e6e6,stroke:#999,stroke-width:1px,color:#000;
    linkStyle default stroke:#757575,stroke-width:2px;

    %% [2] 그룹 및 노드 생성 (가로 폭 220px 고정, 자동 줄바꿈 및 가운데 정렬 강제)
{% for part_title, task_list in workflows.items() %}
{% set safe_title = part_title.split('.', 1) | last | trim %}
    subgraph part{{ loop.index }}["{{ safe_title }}"]
{% for task_key in task_list %}
{% set t_title = tasks[task_key].title if tasks[task_key] is defined else task_key %}
{% set safe_t_title = t_title.split('.', 1) | last | trim %}
        {{ task_key }}["<div style='width: 220px; text-align: center; white-space: normal; word-break: keep-all; overflow-wrap: break-word; padding: 5px; line-height: 1.3;'><b>{{ safe_t_title }}</b><br><span style='font-size:12px; color:#555;'>({{ task_key }})</span></div>"]
{% endfor %}
    end
{% endfor %}

    %% [3] 화살표 연결 (YAML 데이터)
{% for edge in flowchart %}
    {{ edge }}
{% endfor %}

    %% [4] 디자인 입히기
{% for part_title, task_list in workflows.items() %}
{% for task_key in task_list %}
        class {{ task_key }} proc;
{% endfor %}
    style part{{ loop.index }} fill:none,stroke:#b0bec5,stroke-width:2px,stroke-dasharray: 5 5;
{% endfor %}
```